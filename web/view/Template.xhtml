<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <link href="resources/images/icon-bds.ico" rel="shortcut icon" type="image/x-icon" />
        <h:outputStylesheet name="css/default.css"/>
        <h:outputStylesheet name="css/cssLayout.css"/>
        <h:outputStylesheet name="css/style1.css"/>
        <h:outputStylesheet name="css/admin.css"/>
        <ui:insert name="script">

        </ui:insert>
        <title>
            <ui:insert name="title">

            </ui:insert>
        </title>
    </h:head>

    <h:body>
        <div id="main_container">
            <div id="header">
                <ui:insert name="top">
                    <div id="logo"> <a href="#"><img src="resources/images/logo_2.gif" width="180" height="60" alt="" border="0" /></a> </div>
                    <div class="banner_adds"></div>

                    <h:form>
                        <p:menubar styleClass="menu-test" style="border: 0px none;"  model="#{propertyTypeBean.menubar}" >
                        </p:menubar>
                    </h:form>

                </ui:insert>
            </div>

            <div id="main_content">
                <ui:insert name="content1">
                    <div class="column1">
                        <h:form id="frmSearch">
                            <div class="left_box">
                                <div class="top_left_box"> </div>
                                <div class="center_left_box">
                                    <div class="box_title"><span>Find</span> your property</div>
                                    <div class="form">
                                        <div class="form_row">
                                            <label class="left">Category: </label>
                                            <p:selectOneMenu style="width: 170px" id="typOfProperty" value="#{searchBean.propertyType}" required="true" requiredMessage="Required type of property field" >  
                                                <f:selectItem itemLabel="--Select type--" itemValue="0" />  
                                                <f:selectItems value="#{propertyBean.allPropertyType}" var="prot" itemLabel="#{prot.protName}" itemValue="#{prot.protId}"/>  
                                            </p:selectOneMenu>
                                        </div>
                                        <div class="form_row">
                                            <label class="left">City: </label>
                                            <p:selectOneMenu style="width: 170px" id="city" value="#{districtViewBean.provinceSelected}"   >  
                                                <f:selectItem itemLabel="--Select City--" itemValue="0" />  
                                                <f:selectItems value="#{districtViewBean.listProvince}" var="prov" itemLabel="#{prov.provName}" itemValue="#{prov.provId}" />  
                                                <p:ajax update=":frmSearch:txtDistrict" listener="#{districtViewBean.handleProvinceChange}" />  
                                            </p:selectOneMenu>
                                        </div>
                                        <div class="form_row">
                                            <label class="left">District: </label>
                                            <p:selectOneMenu style="width: 170px" id="txtDistrict" value="#{searchBean.districtId}" >  
                                                <f:selectItem itemLabel="--Select district--" itemValue="0" />  
                                                <f:selectItems value="#{districtViewBean.listDistrict}" var="dist" itemLabel="#{dist.distName}" itemValue="#{dist.distId}" />  
                                            </p:selectOneMenu> 
                                        </div>
                                        <div class="form_row">
                                            <label class="left">Price: </label>
                                            <p:inputText value="#{searchBean.priceMin}" id="txtValueMin" >
                                                <f:convertNumber type="number"/>
                                            </p:inputText>
                                        </div>
                                        <div class="form_row">
                                            <label class="left">To: </label>
                                            <p:inputText value="#{searchBean.priceMax}" id="txtValueMax" >
                                                <f:convertNumber type="number"/>
                                            </p:inputText>
                                        </div>
                                        <div class="form_row">
                                            <label class="left">Area: </label>
                                            <p:inputText value="#{searchBean.areaMin}" id="txtAreaMin" >
                                                <f:convertNumber type="number"/>
                                            </p:inputText>
                                        </div>
                                        <div class="form_row">
                                            <label class="left">To: </label>
                                            <p:inputText value="#{searchBean.areaMax}" id="txtAreaMax" >
                                                <f:convertNumber type="number"/>
                                            </p:inputText>
                                        </div>
                                        <div class="form_row">
                                            <label class="left_long">Looking for to:</label>
                                        </div>
                                        <div class="form_row">
                                            <p:selectOneRadio style="padding-left: 30px;" id="console" value="#{searchBean.exchangeType}">
                                                <f:selectItem itemLabel="For sale" itemValue="1" />
                                                <f:selectItem itemLabel="For rent" itemValue="2" />
                                            </p:selectOneRadio>
                                        </div>
                                        <div style="float:right; padding:10px 25px 0 0;">
                                            <p:commandButton id="btnSeach" value="Search" action="search?faces-redirect=true&amp;includeViewParams=true;" >
                                                <f:setPropertyActionListener target="#{searchBean.provinceId}" value="#{districtViewBean.provinceSelected}" />
                                            </p:commandButton>
                                        </div>
                                    </div>
                                </div>
                                <div class="bottom_left_box"> </div>
                            </div>
                        </h:form>
                        <div class="left_box">
                            <div class="top_left_box"> </div>
                            <div class="center_left_box">
                                <div class="box_title"><span>Contact</span> information:</div>
                                <div class="form">
                                    <div class="form_row"> <img src="resources/images/contact_envelope.gif" width="50" height="47" border="0" class="img_right" alt="" />
                                        <div class="contact_information"> Email: info@mysweethome.com<br />
                                            Telephone: 0234 789 90<br />
                                            Mobile: 234 345 234534<br />
                                            Fax: 34534 3456 3456(54)<br />
                                            <br />
                                            <span>www.mysweethome.com</span> </div>
                                    </div>
                                </div>
                            </div>
                            <div class="bottom_left_box"> </div>
                        </div>

                        <div class="left_box">
                            <div class="top_left_box"> </div>
                            <h:form>
                                <div class="center_left_box">
                                    <div class="box_title"><span>Calculator</span> loan rate</div>
                                    <div class="form">
                                        <div class="form_row">
                                            <label class="left">Total loans($)</label>
                                            <p:inputText id="totalLoan" value="#{calLoanBean.totalLoan}" >
                                                <f:convertNumber type="number"/>
                                                <p:ajax update="totalLoan"/>
                                            </p:inputText>
                                        </div>
                                        <div class="form_row">
                                            <label class="left">Term(month)</label>
                                            <p:inputText  id="term" value="#{calLoanBean.term}" >
                                                <f:convertNumber type="number"/>
                                                <p:ajax update="term"/>
                                            </p:inputText>
                                        </div>
                                        <div class="form_row">
                                            <label class="left">Rate(%)</label>
                                            <p:inputText  id="rate" value="#{calLoanBean.rate}" >
                                                <f:convertNumber type="number"/>
                                                <p:ajax update="rate"/>
                                            </p:inputText>
                                        </div>
                                        <div class="form_row">
                                            <label class="left_long">Type</label>
                                        </div>
                                        <div class="form_row">
                                            <p:selectOneRadio style="padding-left: 30px;"  value="#{calLoanBean.type}">
                                                <f:selectItem itemLabel="Debt descending" itemValue="1"  noSelectionOption="true" />
                                                <f:selectItem itemLabel="Debts are paid" itemValue="2" />
                                            </p:selectOneRadio>
                                        </div>
                                        <div style="float:right; padding:10px 25px 0 0;">
                                            <p:commandButton id="btnSeach" update=":frmCal"
                                                             oncomplete="PF('dlg').show()" value="Calculation" >
                                            </p:commandButton>
                                        </div>
                                    </div>
                                </div>
                            </h:form>
                            <div class="bottom_left_box"> </div>
                            <h:form id="frmCal">
                                <p:dialog  header="Calculation financial" widgetVar="dlg" 
                                           modal="true" resizable="false">
                                    <p:outputPanel  id="provinceCreate" style="text-align:center;">
                                        <h:panelGrid columns="2" >
                                            <h:outputText value="Total loans($)"/>
                                            <p:inputText id="totalLoan" value="#{calLoanBean.totalLoan}" >
                                                <f:convertNumber type="number"/>
                                                <p:ajax update="totalLoan"/>
                                            </p:inputText>

                                            <h:outputText value="Term(month)"/>
                                            <p:inputText id="term" value="#{calLoanBean.term}" >
                                                <f:convertNumber type="number"/>
                                                <p:ajax update="term"/>
                                            </p:inputText>

                                            <h:outputText value="Rate(%)"/> 
                                            <p:inputText id="rate" value="#{calLoanBean.rate}" >
                                                <f:convertNumber type="number"/>
                                                <p:ajax update="rate"/>
                                            </p:inputText>

                                            <h:outputText value="Type"/> 
                                            <p:selectOneRadio style="padding-left: 30px;"  value="#{calLoanBean.type}">
                                                <f:selectItem itemLabel="Debt descending" itemValue="1"  noSelectionOption="true" />
                                                <f:selectItem itemLabel="Debts are paid" itemValue="2" />
                                            </p:selectOneRadio>
                                        </h:panelGrid>
                                        <p:scrollPanel id="scroll" style="border: 0;width:605px;max-height:300px;">
                                            <p:dataTable id="dt" style="width: 605px;" var="loan" 
                                                         value="#{calLoanBean.initLoan()}" >
                                                <p:column style="text-align: center" headerText="Month">
                                                    <h:outputText value="#{loan.index}">
                                                        <f:convertNumber type="number" />
                                                    </h:outputText>
                                                </p:column>
                                                <p:column style="text-align: center" headerText="Funds payable">
                                                    <h:outputText value="#{loan.traGoc}" >
                                                        <f:convertNumber type="currency" />
                                                    </h:outputText>
                                                </p:column>
                                                <p:column style="text-align: center"  headerText="Interest payable">
                                                    <h:outputText value="#{loan.laiPhaiTra}" >
                                                        <f:convertNumber type="currency" />
                                                    </h:outputText>
                                                </p:column>
                                                <p:column style="text-align: center" headerText="Funds + Interest">
                                                    <h:outputText  value="#{loan.tienPhaiTra}" >
                                                        <f:convertNumber type="currency" />
                                                    </h:outputText>
                                                </p:column>
                                            </p:dataTable>
                                        </p:scrollPanel>
                                        <p:commandButton ajax="true" value="Calculation" update="dt,scroll"/>
                                    </p:outputPanel>
                                </p:dialog>
                            </h:form>
                        </div>    

                    </div>
                </ui:insert>

                <ui:insert name="content">

                </ui:insert>
            </div>


            <ui:insert name="bottom">
                <div class="bottom_box">

                    <div class="center_bottom_box">
                        <p:dataGrid styleClass="ui-grid-bottom" columns="4" value="#{provinceBean.allProvince}" var="province"  >
                            <p:link href="search.xhtml?city=#{province.provId}" value="#{province.provName}" />
                        </p:dataGrid>
                    </div>

                </div>
                <div id="footer">
                    <div id="copyright">
                        <div style="float:left; padding:3px;"><a href="#"><img src="resources/images/footer_logo.gif" width="42" height="35" alt="" border="0" /></a></div>
                        <div style="float:left; padding:14px 10px 10px 10px;"> Company name.&copy; All Rights Reserved 2015</div>
                    </div>
                    <ul class="footer_menu">
                        <li><a href="index.xhtml" class="nav_footer"> Home </a></li>
                        <li><a href="newproperty.xhtml" class="nav_footer"> Buying Homes </a></li>
                        <li><a href="search.xhtml?exchange=1" class="nav_footer"> Selling Homes </a></li>
                        <li><a href="search.xhtml?exchange=2" class="nav_footer"> Renting Homes</a></li>
                        <li><a href="contact.xhtml" class="nav_footer"> Contact </a></li>
                    </ul>
                </div>
            </ui:insert>

        </div>
    </h:body>

</html>
